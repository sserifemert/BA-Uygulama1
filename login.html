<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sohbete GiriÅŸ - Python WebSocket</title>
    <link rel="stylesheet" href="login-style.css">
</head>
<body>
    <div class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>ğŸ Python WebSocket</h1>
                <h2>Sohbet OdasÄ±na HoÅŸ Geldiniz</h2>
                <p>Anonim olarak sohbete katÄ±lÄ±n</p>
            </div>

            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="usernameInput">
                        <span class="label-icon">ğŸ‘¤</span>
                        KullanÄ±cÄ± AdÄ±
                    </label>
                    <input 
                        type="text" 
                        id="usernameInput" 
                        placeholder="Takma adÄ±nÄ±zÄ± girin..." 
                        maxlength="20"
                        required
                        autocomplete="off"
                    >
                    <small class="input-hint">3-20 karakter arasÄ± olmalÄ±dÄ±r</small>
                </div>

                <button type="submit" class="login-btn">
                    <span>Sohbete KatÄ±l</span>
                    <span class="btn-arrow">â†’</span>
                </button>

                <div class="login-info">
                    <div class="info-item">
                        <span class="info-icon">ğŸ”’</span>
                        <span>Tamamen anonim</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">âš¡</span>
                        <span>GerÃ§ek zamanlÄ±</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">ğŸŒ</span>
                        <span>KayÄ±t gerektirmez</span>
                    </div>
                </div>
            </form>

            <div class="login-footer">
                <p>Sohbet kurallarÄ±na uygun davranÄ±n ğŸ¤</p>
            </div>
        </div>

        <div class="background-animation">
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
        </div>
    </div>

    <script>
        const loginForm = document.getElementById('loginForm');
        const usernameInput = document.getElementById('usernameInput');

        // Form gÃ¶nderildiÄŸinde
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = usernameInput.value.trim();
            
            // KullanÄ±cÄ± adÄ± kontrolÃ¼
            if (username.length < 3) {
                showError('KullanÄ±cÄ± adÄ± en az 3 karakter olmalÄ±dÄ±r');
                return;
            }
            
            if (username.length > 20) {
                showError('KullanÄ±cÄ± adÄ± en fazla 20 karakter olabilir');
                return;
            }

            // Ã–zel karakterleri kontrol et
            const validPattern = /^[a-zA-Z0-9ÄŸÃ¼ÅŸÄ±Ã¶Ã§ÄÃœÅÄ°Ã–Ã‡_\s]+$/;
            if (!validPattern.test(username)) {
                showError('Sadece harf, rakam ve alt Ã§izgi kullanabilirsiniz');
                return;
            }
            
            // KullanÄ±cÄ± adÄ±nÄ± localStorage'a kaydet
            localStorage.setItem('chatUsername', username);
            
            // Sohbet sayfasÄ±na yÃ¶nlendir
            window.location.href = 'index.html';
        });

        // Hata mesajÄ± gÃ¶ster
        function showError(message) {
            // Mevcut hata mesajÄ±nÄ± kaldÄ±r
            const existingError = document.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }

            // Yeni hata mesajÄ± ekle
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            
            const formGroup = document.querySelector('.form-group');
            formGroup.appendChild(errorDiv);
            
            // Input'a hata stili ekle
            usernameInput.classList.add('input-error');
            
            // 3 saniye sonra hata mesajÄ±nÄ± kaldÄ±r
            setTimeout(() => {
                errorDiv.remove();
                usernameInput.classList.remove('input-error');
            }, 3000);
        }

        // Sayfa yÃ¼klendiÄŸinde input'a odaklan
        window.addEventListener('load', () => {
            usernameInput.focus();
        });

        // Enter tuÅŸu ile form gÃ¶nderimi
        usernameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loginForm.dispatchEvent(new Event('submit'));
            }
        });
    </script>
</body>
</html>
